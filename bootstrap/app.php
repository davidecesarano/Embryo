<?php 

    use Dotenv\Dotenv;
    use Embryo\Application as App;
    use Embryo\Facade;

    /*
    |--------------------------------------------------------------------------
    | DOTENV
    |--------------------------------------------------------------------------
    */

    $dotenv = new Dotenv(ROOT_PATH);
    $dotenv->load();

    /*
    |--------------------------------------------------------------------------
    | SETTINGS
    |--------------------------------------------------------------------------
    */
    
    $settings = require_once ROOT_PATH.'bootstrap/settings.php';

    /*
    |--------------------------------------------------------------------------
    | APPLICATION
    |--------------------------------------------------------------------------
    */

    $app = new App($settings);

    /*
    |--------------------------------------------------------------------------
    | IMPORT SERVICES, MIDDLEWARES AND ROUTES
    |--------------------------------------------------------------------------
    */

    $app->import([
        app_path('bootstrap/services.php'),
        app_path('bootstrap/middleware.php'),
        app_path('routes/api.php'),
        app_path('routes/app.php')
    ]);

    /*
    |--------------------------------------------------------------------------
    | RUN APPLICATION
    |--------------------------------------------------------------------------
    */

    return $app;